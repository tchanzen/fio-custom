var ne=Object.defineProperty;var ae=(n,a,c)=>a in n?ne(n,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[a]=c;var j=(n,a,c)=>ae(n,typeof a!="symbol"?a+"":a,c);const ie=[{type:"number",key:"numberOfIcons",label:"Number of Icons",input:"true",tooltip:"The number of icons displayed in the form"},{type:"textfield",key:"icon",label:"Icon",input:"true",tooltip:"The bootstrap icon class that will go in the <i> tag"},{type:"textfield",key:"color",label:"Color",input:"true",tooltip:"The color of the icons"},{type:"textfield",key:"iconSize",label:"Icon Size",tooltip:"The size of the icon"},{key:"placeholder",ignore:!0}],oe=Formio.Components.baseEditForm;function se(...n){return oe([{key:"display",components:ie},{key:"layout",ignore:!0}],...n)}const X=Formio.Components.components.field,F=class F extends X{static schema(...a){return X.schema({type:"rating",label:"rating",key:"rating",icon:"bi bi-star",iconSize:"2rem",color:"blue",numberOfIcons:5},...a)}static get builderInfo(){return{title:"Rating",icon:"star",group:"basic",documentation:"/userguide/#rating",weight:0,schema:F.schema()}}constructor(a,c,s){super(a,c,s)}render(){var a;return super.render(this.renderTemplate("rating",{numberOfIcons:this.component.numberOfIcons,filledIcons:Number((a=this.dataValue)==null?void 0:a.split("/")[0])}))}attachIcon(a,c){a.item(c).addEventListener("click",()=>{this.component.disabled||this.setValue(`${c+1}/${this.component.numberOfIcons}`)})}attachIcons(){const a=this.refs.icon;for(let c=0;c<a.length;c++)this.attachIcon(a,c)}attach(a){return this.loadRefs(a,{rating:"single",icon:"multiple"}),this.attachIcons(),super.attach(a)}get defaultSchema(){return F.schema()}setValue(a){const c=super.setValue(a);return this.redraw(),c}};j(F,"editForm",se);let R=F;const ce=[{type:"number",key:"numberOfColumns",label:"Number of Columns",input:"true",tooltip:"The number of columns to be displayed"}],le=[{key:"multiple",ignore:!0},{key:"dataSrc",ignore:!0},{key:"dataType",ignore:!0},{type:"datagrid",input:!0,label:"Values",key:"values",tooltip:"The values that can be picked for this field. Values are text submitted with the form data. Labels are the title of the card. Description is the body. Icons are bootstrap icons, e.g. bi bi-book",weight:10,reorder:!0,defaultValue:[{label:"",value:"",description:"",icon:""}],components:[{label:"Label",key:"label",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield",allowCalculateOverride:!0,calculateValue:"value = _.camelCase(row.label);",validate:{required:!0}},{label:"Description",key:"description",input:!0,type:"textfield"},{label:"Icon",key:"icon",input:!0,type:"textfield"}]}],ue=Formio.Components.baseEditForm;function de(...n){return ue([{key:"display",components:ce},{key:"data",components:le}],...n)}const q=Formio.Components.components.field,S=class S extends q{static schema(...a){return q.schema({type:"cardField",label:"Card Field",key:"cardField",values:[{label:"",value:"",description:"",icon:""}],input:!0,numberOfColumns:2},...a)}static get builderInfo(){return{title:"Card Field",group:"basic",icon:"fas fa-square",weight:0,schema:S.schema()}}constructor(a,c,s){super(a,c,s)}render(){return super.render(this.renderTemplate("cardField",{component:this.component,value:this.dataValue,data:this.data,instance:this}))}attachCardListeners(){(this.refs.cardField||[]).forEach(c=>{c.addEventListener("click",()=>{const s=c.getAttribute("data-value");this.setValue(s)})})}attach(a){return this.loadRefs(a,{cardField:"multiple"}),this.attachCardListeners(),super.attach(a)}updateCards(a){(this.refs.cardField||[]).forEach(s=>{const g=s.getAttribute("data-value");s.classList.toggle("border-primary",g===a)})}get defaultSchema(){return S.schema()}setValue(a,c){const s=super.setValue(a,c);return this.updateCards(a),s}getValue(){return this.dataValue}};j(S,"editForm",de);let $=S;const fe={rating:R,cardField:$};function he(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function pe(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var a=n.default;if(typeof a=="function"){var c=function s(){return this instanceof s?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};c.prototype=a.prototype}else c={};return Object.defineProperty(c,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var g=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(c,s,g.get?g:{enumerable:!0,get:function(){return n[s]}})}),c}var k={};const me={},ve=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"})),B=pe(ve);var M={},Z;function ge(){return Z||(Z=1,function(n){var a=/[|\\{}()[\]^$+*?.]/g,c=Object.prototype.hasOwnProperty,s=function(l,d){return c.apply(l,[d])};n.escapeRegExpChars=function(l){return l?String(l).replace(a,"\\$&"):""};var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},I=/[&<>'"]/g;function P(l){return g[l]||l}var A=`var _ENCODE_HTML_RULES = {
      "&": "&amp;"
    , "<": "&lt;"
    , ">": "&gt;"
    , '"': "&#34;"
    , "'": "&#39;"
    }
  , _MATCH_HTML = /[&<>'"]/g;
function encode_char(c) {
  return _ENCODE_HTML_RULES[c] || c;
};
`;n.escapeXML=function(l){return l==null?"":String(l).replace(I,P)};function T(){return Function.prototype.toString.call(this)+`;
`+A}try{typeof Object.defineProperty=="function"?Object.defineProperty(n.escapeXML,"toString",{value:T}):n.escapeXML.toString=T}catch{console.warn("Unable to set escapeXML.toString (is the Function prototype frozen?)")}n.shallowCopy=function(l,d){if(d=d||{},l!=null)for(var h in d)s(d,h)&&(h==="__proto__"||h==="constructor"||(l[h]=d[h]));return l},n.shallowCopyFromList=function(l,d,h){if(h=h||[],d=d||{},l!=null)for(var w=0;w<h.length;w++){var _=h[w];if(typeof d[_]<"u"){if(!s(d,_)||_==="__proto__"||_==="constructor")continue;l[_]=d[_]}}return l},n.cache={_data:{},set:function(l,d){this._data[l]=d},get:function(l){return this._data[l]},remove:function(l){delete this._data[l]},reset:function(){this._data={}}},n.hyphenToCamel=function(l){return l.replace(/-[a-z]/g,function(d){return d[1].toUpperCase()})},n.createNullProtoObjWherePossible=function(){return typeof Object.create=="function"?function(){return Object.create(null)}:{__proto__:null}instanceof Object?function(){return{}}:function(){return{__proto__:null}}}(),n.hasOwnOnlyObject=function(l){var d=n.createNullProtoObjWherePossible();for(var h in l)s(l,h)&&(d[h]=l[h]);return d}}(M)),M}const _e="3.1.10",ye={version:_e};var G;function be(){return G||(G=1,function(n){/**
 * @file Embedded JavaScript templating engine. {@link http://ejs.co}
 * @author Matthew Eernisse <mde@fleegix.org>
 * @author Tiancheng "Timothy" Gu <timothygu99@gmail.com>
 * @project EJS
 * @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}
 */var a=B,c=B,s=ge(),g=!1,I=ye.version,P="<",A=">",T="%",l="locals",d="ejs",h="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",w=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],_=w.concat("cache"),V=/^\uFEFF/,N=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/;n.cache=s.cache,n.fileLoader=a.readFileSync,n.localsName=l,n.promiseImpl=new Function("return this;")().Promise,n.resolveInclude=function(t,i,e){var r=c.dirname,o=c.extname,u=c.resolve,p=u(e?i:r(i),t),y=o(t);return y||(p+=".ejs"),p};function W(t,i){var e;if(i.some(function(r){return e=n.resolveInclude(t,r,!0),a.existsSync(e)}))return e}function K(t,i){var e,r,o=i.views,u=/^[A-Za-z]+:\\|^\//.exec(t);if(u&&u.length)t=t.replace(/^\/*/,""),Array.isArray(i.root)?e=W(t,i.root):e=n.resolveInclude(t,i.root||"/",!0);else if(i.filename&&(r=n.resolveInclude(t,i.filename),a.existsSync(r)&&(e=r)),!e&&Array.isArray(o)&&(e=W(t,o)),!e&&typeof i.includer!="function")throw new Error('Could not find the include file "'+i.escapeFunction(t)+'"');return e}function E(t,i){var e,r=t.filename,o=arguments.length>1;if(t.cache){if(!r)throw new Error("cache option requires a filename");if(e=n.cache.get(r),e)return e;o||(i=x(r).toString().replace(V,""))}else if(!o){if(!r)throw new Error("Internal EJS error: no file name or template provided");i=x(r).toString().replace(V,"")}return e=n.compile(i,t),t.cache&&n.cache.set(r,e),e}function Q(t,i,e){var r;if(e){try{r=E(t)(i)}catch(o){return e(o)}e(null,r)}else{if(typeof n.promiseImpl=="function")return new n.promiseImpl(function(o,u){try{r=E(t)(i),o(r)}catch(p){u(p)}});throw new Error("Please provide a callback function")}}function x(t){return n.fileLoader(t)}function Y(t,i){var e=s.shallowCopy(s.createNullProtoObjWherePossible(),i);if(e.filename=K(t,e),typeof i.includer=="function"){var r=i.includer(t,e.filename);if(r&&(r.filename&&(e.filename=r.filename),r.template))return E(e,r.template)}return E(e)}function z(t,i,e,r,o){var u=i.split(`
`),p=Math.max(r-3,0),y=Math.min(u.length,r+3),v=o(e),b=u.slice(p,y).map(function(O,C){var L=C+p+1;return(L==r?" >> ":"    ")+L+"| "+O}).join(`
`);throw t.path=v,t.message=(v||"ejs")+":"+r+`
`+b+`

`+t.message,t}function U(t){return t.replace(/;(\s*$)/,"$1")}n.compile=function(i,e){var r;return e&&e.scope&&(g||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),g=!0),e.context||(e.context=e.scope),delete e.scope),r=new f(i,e),r.compile()},n.render=function(t,i,e){var r=i||s.createNullProtoObjWherePossible(),o=e||s.createNullProtoObjWherePossible();return arguments.length==2&&s.shallowCopyFromList(o,r,w),E(o,t)(r)},n.renderFile=function(){var t=Array.prototype.slice.call(arguments),i=t.shift(),e,r={filename:i},o,u;return typeof arguments[arguments.length-1]=="function"&&(e=t.pop()),t.length?(o=t.shift(),t.length?s.shallowCopy(r,t.pop()):(o.settings&&(o.settings.views&&(r.views=o.settings.views),o.settings["view cache"]&&(r.cache=!0),u=o.settings["view options"],u&&s.shallowCopy(r,u)),s.shallowCopyFromList(r,o,_)),r.filename=i):o=s.createNullProtoObjWherePossible(),Q(r,o,e)},n.Template=f,n.clearCache=function(){n.cache.reset()};function f(t,i){var e=s.hasOwnOnlyObject(i),r=s.createNullProtoObjWherePossible();this.templateText=t,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",r.client=e.client||!1,r.escapeFunction=e.escape||e.escapeFunction||s.escapeXML,r.compileDebug=e.compileDebug!==!1,r.debug=!!e.debug,r.filename=e.filename,r.openDelimiter=e.openDelimiter||n.openDelimiter||P,r.closeDelimiter=e.closeDelimiter||n.closeDelimiter||A,r.delimiter=e.delimiter||n.delimiter||T,r.strict=e.strict||!1,r.context=e.context,r.cache=e.cache||!1,r.rmWhitespace=e.rmWhitespace,r.root=e.root,r.includer=e.includer,r.outputFunctionName=e.outputFunctionName,r.localsName=e.localsName||n.localsName||l,r.views=e.views,r.async=e.async,r.destructuredLocals=e.destructuredLocals,r.legacyInclude=typeof e.legacyInclude<"u"?!!e.legacyInclude:!0,r.strict?r._with=!1:r._with=typeof e._with<"u"?e._with:!0,this.opts=r,this.regex=this.createRegex()}f.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},f.prototype={createRegex:function(){var t=h,i=s.escapeRegExpChars(this.opts.delimiter),e=s.escapeRegExpChars(this.opts.openDelimiter),r=s.escapeRegExpChars(this.opts.closeDelimiter);return t=t.replace(/%/g,i).replace(/</g,e).replace(/>/g,r),new RegExp(t)},compile:function(){var t,i,e=this.opts,r="",o="",u=e.escapeFunction,p,y=e.filename?JSON.stringify(e.filename):"undefined";if(!this.source){if(this.generateSource(),r+=`  var __output = "";
  function __append(s) { if (s !== undefined && s !== null) __output += s }
`,e.outputFunctionName){if(!N.test(e.outputFunctionName))throw new Error("outputFunctionName is not a valid JS identifier.");r+="  var "+e.outputFunctionName+` = __append;
`}if(e.localsName&&!N.test(e.localsName))throw new Error("localsName is not a valid JS identifier.");if(e.destructuredLocals&&e.destructuredLocals.length){for(var v="  var __locals = ("+e.localsName+` || {}),
`,b=0;b<e.destructuredLocals.length;b++){var O=e.destructuredLocals[b];if(!N.test(O))throw new Error("destructuredLocals["+b+"] is not a valid JS identifier.");b>0&&(v+=`,
  `),v+=O+" = __locals."+O}r+=v+`;
`}e._with!==!1&&(r+="  with ("+e.localsName+` || {}) {
`,o+=`  }
`),o+=`  return __output;
`,this.source=r+this.source+o}e.compileDebug?t=`var __line = 1
  , __lines = `+JSON.stringify(this.templateText)+`
  , __filename = `+y+`;
try {
`+this.source+`} catch (e) {
  rethrow(e, __lines, __filename, __line, escapeFn);
}
`:t=this.source,e.client&&(t="escapeFn = escapeFn || "+u.toString()+`;
`+t,e.compileDebug&&(t="rethrow = rethrow || "+z.toString()+`;
`+t)),e.strict&&(t=`"use strict";
`+t),e.debug&&console.log(t),e.compileDebug&&e.filename&&(t=t+`
//# sourceURL=`+y+`
`);try{if(e.async)try{p=new Function("return (async function(){}).constructor;")()}catch(m){throw m instanceof SyntaxError?new Error("This environment does not support async/await"):m}else p=Function;i=new p(e.localsName+", escapeFn, include, rethrow",t)}catch(m){throw m instanceof SyntaxError&&(e.filename&&(m.message+=" in "+e.filename),m.message+=` while compiling ejs

`,m.message+=`If the above error is not helpful, you may want to try EJS-Lint:
`,m.message+="https://github.com/RyanZim/EJS-Lint",e.async||(m.message+=`
`,m.message+="Or, if you meant to create an async function, pass `async: true` as an option.")),m}var C=e.client?i:function(H){var te=function(re,J){var D=s.shallowCopy(s.createNullProtoObjWherePossible(),H);return J&&(D=s.shallowCopy(D,J)),Y(re,e)(D)};return i.apply(e.context,[H||s.createNullProtoObjWherePossible(),u,te,z])};if(e.filename&&typeof Object.defineProperty=="function"){var L=e.filename,ee=c.basename(L,c.extname(L));try{Object.defineProperty(C,"name",{value:ee,writable:!1,enumerable:!1,configurable:!0})}catch{}}return C},generateSource:function(){var t=this.opts;t.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,`
`).replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var i=this,e=this.parseTemplateText(),r=this.opts.delimiter,o=this.opts.openDelimiter,u=this.opts.closeDelimiter;e&&e.length&&e.forEach(function(p,y){var v;if(p.indexOf(o+r)===0&&p.indexOf(o+r+r)!==0&&(v=e[y+2],!(v==r+u||v=="-"+r+u||v=="_"+r+u)))throw new Error('Could not find matching close tag for "'+p+'".');i.scanLine(p)})},parseTemplateText:function(){for(var t=this.templateText,i=this.regex,e=i.exec(t),r=[],o;e;)o=e.index,o!==0&&(r.push(t.substring(0,o)),t=t.slice(o)),r.push(e[0]),t=t.slice(e[0].length),e=i.exec(t);return t&&r.push(t),r},_addOutput:function(t){if(this.truncate&&(t=t.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!t)return t;t=t.replace(/\\/g,"\\\\"),t=t.replace(/\n/g,"\\n"),t=t.replace(/\r/g,"\\r"),t=t.replace(/"/g,'\\"'),this.source+='    ; __append("'+t+`")
`},scanLine:function(t){var i=this,e=this.opts.delimiter,r=this.opts.openDelimiter,o=this.opts.closeDelimiter,u=0;switch(u=t.split(`
`).length-1,t){case r+e:case r+e+"_":this.mode=f.modes.EVAL;break;case r+e+"=":this.mode=f.modes.ESCAPED;break;case r+e+"-":this.mode=f.modes.RAW;break;case r+e+"#":this.mode=f.modes.COMMENT;break;case r+e+e:this.mode=f.modes.LITERAL,this.source+='    ; __append("'+t.replace(r+e+e,r+e)+`")
`;break;case e+e+o:this.mode=f.modes.LITERAL,this.source+='    ; __append("'+t.replace(e+e+o,e+o)+`")
`;break;case e+o:case"-"+e+o:case"_"+e+o:this.mode==f.modes.LITERAL&&this._addOutput(t),this.mode=null,this.truncate=t.indexOf("-")===0||t.indexOf("_")===0;break;default:if(this.mode){switch(this.mode){case f.modes.EVAL:case f.modes.ESCAPED:case f.modes.RAW:t.lastIndexOf("//")>t.lastIndexOf(`
`)&&(t+=`
`)}switch(this.mode){case f.modes.EVAL:this.source+="    ; "+t+`
`;break;case f.modes.ESCAPED:this.source+="    ; __append(escapeFn("+U(t)+`))
`;break;case f.modes.RAW:this.source+="    ; __append("+U(t)+`)
`;break;case f.modes.COMMENT:break;case f.modes.LITERAL:this._addOutput(t);break}}else this._addOutput(t)}i.opts.compileDebug&&u&&(this.currentLine+=u,this.source+="    ; __line = "+this.currentLine+`
`)}},n.escapeXML=s.escapeXML,n.__express=n.renderFile,n.VERSION=I,n.name=d,typeof window<"u"&&(window.ejs=n)}(k)),k}var we=be();const Ee=he(we);function Oe(n){return Ee.render(`<div class="card-field--group row">
  <% component.values.forEach(function(item) { %>
    <div ref="cardField" class="card card-field--option mb-2 mr-2 shadow-sm col-12 col-md-<%= 12 / component.numberOfColumns - 1 %>" data-value="<%= item.value %>" style="cursor: pointer;">
      <div class="row">
        <div class="col-2">
          <div class="card-field--icon m-2 border rounded h-50 w-100 text-center d-flex justify-content-center align-items-center">
            <i class="<%= item.icon || 'fas fa-circle' %> w-100"></i>
          </div>
        </div>
        <div class="col-10">
          <div class="card-body">
            <h5 class="card-title mb-1"><%= item.label %></h5>
            <p class="card-text text-muted small"><%= item.description || '' %></p>
          </div>
        </div>
      </div>
    </div>
  <% }); %>
</div>`,n)}function Le(n){return`
    <div ref="rating">
      ${function(){let a="";for(let c=0;c<n.numberOfIcons;c++)a+=`<i style="color: ${n.component.color}; font-size: ${n.component.iconSize}" class="${n.component.icon}${c<n.filledIcons?"-fill":""}" ref="icon"></i>`;return a}()}
    </div>
  `}const Fe={bootstrap:{rating:{form:Le},cardField:{form:Oe}}};Formio.use({components:fe,templates:Fe});
